clear 
clc
n=5;

l=3; %do not alter it
k=n-l;
s = dec2bin(2^k-1:-1:0)-'0';
v = dec2bin(2^l-1:-1:0)-'0';
s = flipud(s);
v = flipud(v);

for i=1:2^k
    for j=1:2^l
        sv(j,:,i)=[s(i,:),v(j,:)];
    end
end



% g=ones(n,n);
% for i=2:n
% g(i,i)=0;
% end




% g=[1,0,0,0;
%    1,1,0,0;
%    1,0,1,0;
%    1,1,1,1]
% 
% g=[1,0,0,0,0;
%    1,1,0,0,0;
%    1,0,1,0,0;
%    1,0,0,1,0;
%    1,1,1,1,1];

% g=[1,0,0,0,0,0;
%    1,1,0,0,0,0;
%    1,0,1,0,0,0;
%    1,0,0,1,0,0;
%    1,0,0,0,1,0;
%    1,1,1,1,1,1];
cc=0;
ee=1;
while ee==1
    
%     g=[1,rand>0.5,rand>0.5,rand>0.5,rand>0.5;
%         1,rand>0.5,rand>0.5,rand>0.5,rand>0.5;
%         1,rand>0.5,rand>0.5,rand>0.5,rand>0.5;
%         1,rand>0.5,rand>0.5,rand>0.5,rand>0.5;
%         1,1,1,1,1];

g=rand(5,5)>0.5;
cc=cc+1

for i=1:2^k
x(:,:,i)=rem(sv(:,:,i)*g,2);
end

for i=1:2^k
xx(:,:,i)=x(:,:,i)';
end
r=sum(xx);

for i=1:2^k
   y(:,i)=r(1,:,i) 
end
yyy=[y(:,1);y(:,2);y(:,3);y(:,4)];
uy=yyy';
%dorost=[0,3,2,3,2,3,2,5,1,2,1,2,3,4,3,4,1,2,3,2,3,2,3,4,2,1,2,1,4,3,4,3];
yy=sum(y);
e=fourcount(y(:,1),y(:,2),y(:,3),y(:,4));

if e==[0,2,1,2] %|| e==[0,1,2,2] %|| e==[0,2,2,1] || e==[1,0,2,2] || e==[2,0,1,2] || e==[2,0,2,1] || e==[1,2,0,2] || e==[2,1,0,2] || e==[2,2,0,1] || e==[1,2,2,0] || e==[2,1,2,0] || e==[2,2,1,0]  
    ee=0;
end

if e==[0,1,2,2] %|| e==[0,1,2,2] || e==[0,2,2,1] || e==[1,0,2,2] ||e==[2,0,1,2] || e==[2,0,2,1] ||e==[1,2,0,2] || e==[2,1,0,2] ||e==[2,2,0,1] || e==[1,2,2,0] || e==[2,1,2,0] || e==[2,2,1,0]  
    ee=0;
end

if e==[0,2,2,1] %|| e==[0,1,2,2] || e==[0,2,2,1] || e==[1,0,2,2] ||e==[2,0,1,2] || e==[2,0,2,1] ||e==[1,2,0,2] || e==[2,1,0,2] ||e==[2,2,0,1] || e==[1,2,2,0] || e==[2,1,2,0] || e==[2,2,1,0]  
    ee=0;
end

% if e==[1,0,2,2] %|| e==[0,1,2,2] || e==[0,2,2,1] || e==[1,0,2,2] ||e==[2,0,1,2] || e==[2,0,2,1] ||e==[1,2,0,2] || e==[2,1,0,2] ||e==[2,2,0,1] || e==[1,2,2,0] || e==[2,1,2,0] || e==[2,2,1,0]  
%     ee=0;
% end
% 
% if e==[2,0,1,2] %|| e==[0,1,2,2] || e==[0,2,2,1] || e==[1,0,2,2] ||e==[2,0,1,2] || e==[2,0,2,1] ||e==[1,2,0,2] || e==[2,1,0,2] ||e==[2,2,0,1] || e==[1,2,2,0] || e==[2,1,2,0] || e==[2,2,1,0]  
%     ee=0;
% end
% 
% if e==[2,0,2,1] %|| e==[0,1,2,2] || e==[0,2,2,1] || e==[1,0,2,2] ||e==[2,0,1,2] || e==[2,0,2,1] ||e==[1,2,0,2] || e==[2,1,0,2] ||e==[2,2,0,1] || e==[1,2,2,0] || e==[2,1,2,0] || e==[2,2,1,0]  
%     ee=0;
% end
% 
% if e==[1,2,0,2] %|| e==[0,1,2,2] || e==[0,2,2,1] || e==[1,0,2,2] ||e==[2,0,1,2] || e==[2,0,2,1] || e==[1,2,0,2] || e==[2,1,0,2] ||e==[2,2,0,1] || e==[1,2,2,0] || e==[2,1,2,0] || e==[2,2,1,0]  
%     ee=0;
% end
% 
% if e==[2,1,0,2] %|| e==[0,1,2,2] || e==[0,2,2,1] || e==[1,0,2,2] ||e==[2,0,1,2] || e==[2,0,2,1] ||e==[1,2,0,2] || e==[2,1,0,2] ||e==[2,2,0,1] || e==[1,2,2,0] || e==[2,1,2,0] || e==[2,2,1,0]  
%     ee=0;
% end
% 
% if e==[2,2,0,1] %|| e==[0,1,2,2] || e==[0,2,2,1] || e==[1,0,2,2] ||e==[2,0,1,2] || e==[2,0,2,1] ||e==[1,2,0,2] || e==[2,1,0,2] ||e==[2,2,0,1] || e==[1,2,2,0] || e==[2,1,2,0] || e==[2,2,1,0]  
%     ee=0;
% end
% 
% if e==[1,2,2,0] %|| e==[0,1,2,2] || e==[0,2,2,1] || e==[1,0,2,2] ||e==[2,0,1,2] || e==[2,0,2,1] ||e==[1,2,0,2] || e==[2,1,0,2] ||e==[2,2,0,1] || e==[1,2,2,0] || e==[2,1,2,0] || e==[2,2,1,0]  
%     ee=0;
% end
% 
% if e==[2,1,2,0] %|| e==[0,1,2,2] || e==[0,2,2,1] || e==[1,0,2,2] ||e==[2,0,1,2] || e==[2,0,2,1] ||e==[1,2,0,2] || e==[2,1,0,2] ||e==[2,2,0,1] || e==[1,2,2,0] || e==[2,1,2,0] || e==[2,2,1,0]  
%     ee=0;
% end
% 
% if e==[2,2,1,0] %|| e==[0,1,2,2] || e==[0,2,2,1] || e==[1,0,2,2] ||e==[2,0,1,2] || e==[2,0,2,1] ||e==[1,2,0,2] || e==[2,1,0,2] ||e==[2,2,0,1] || e==[1,2,2,0] || e==[2,1,2,0] || e==[2,2,1,0]  
%     ee=0;
% end


end
r
% for i=1:2^k
% xxx(:,:,i)=rem(x(:,:,i)*h,2);
% end